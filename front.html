<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

        <script>
            function displayData(senses){
                var table = document.getElementById("word-sense");
                for(let word of Object.keys(senses)){
                    console.log(senses[word])
                    var row =   table.insertRow(0);
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    cell1.innerHTML = senses[word]['sysnset'];
                    cell2.innerHTML = senses[word]['def'];
                    cell3.innerHTML = senses[word]['examples'][0];
                    //dataformat:
                    /*
                    senses = {
                        'boy@1':{
                            'synset':'male_child.n.01',
                            'def':'definition of the word',
                            'examples':['ex1', 'ex2', 'ex3'],   
                        }
                    }
                    */

                    /*
                    Sample Senses:
                    "senses": {
                        "boy@1": {
                            "synset": "male_child.n.01",
                            "def": "a youthful male person",
                            "examples": [
                                "the baby was a boy",
                                "she made the boy brush his teeth every night",
                                "most soldiers are only boys in uniform"
                            ]
                        },
                        "cow@5": {
                            "synset": "cow.n.01",
                            "def": "female of domestic cattle:",
                            "examples": [
                                "`moo-cow' is a child's term"
                            ]
                        }
                    }
                    
                    */
                    //replace console.log with code to update html elements.
                }
            }
            function getSenses(){
                //change the two vars being set below.
                let sent = document.getElementById('sent').value.split(' ').join('_')
                console.log(document.getElementById('sent'))
                let algo = 'wfs'
                let data = {
                    sentence:sent,
                    algorithm:algo
                }
                const options = {
                    method: 'POST',
                    mode: 'no-cors',
                    cahce:'no-cache',
                    headers: {
                        'Content-Type': 'application/json',
                        'crossorigin':true
                      },
                    redirect:'follow',
                    referrerPolicy:'no-referrer',
                    body:JSON.stringify(data)
                  };
                const url = 'http://127.0.0.1:8000/senses/'
                
                axios.post(url,data).then((ans)=>{
                    displayData(ans.data)
                })
                //fetch(url, options).then(ans=>{
                  //  console.log(ans)
                //})
            }
        </script>
        <script>
            setTimeout(()=>getSenses(),3000)
        </script>
    </head>
    <body>
        <input id="sent" placeholder="Enter a sentence here..." value="the boy loves me"/>
        <input id="algo" placeholder="Enter one of wfs, mfs, elesk or pr" value="wfs"/>
        <button onclick="getSenses()">Submit</button>
    <table id="word-sense">
        <!-- <tr>
            <th>Company</th>
            <th>Contact</th>
            <th>Country</th>
        </tr> -->
    </table>
    </body>
</html>